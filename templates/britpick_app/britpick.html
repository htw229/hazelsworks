{% extends 'britpick_app/base.html' %}
{% load static %}

{% block includes %}
    <script src="/static/britpick_app/britpicked_text.js"></script>
{% endblock %}

{% block content %}

    <div class="britpick-form">
        <form action="" method="post">
            {% csrf_token %}
            <ul>{{ form.as_ul }}</ul>
            <input type="submit" value="Submit">
        </form>
    </div>

    <hr>

    <div class="britpick-settings">
        britpicked: text={{ britpicked.text }} dialect={{ britpicked.dialect }} dialectfromform={{ formdata.dialect }}
        (<a onclick="expandAllBritpicks()">expand all</a>) | (<a onclick="collapseAllBritpicks()">collapse all</a>)
    </div>

    <div class="britpick-results">
        {% for paragraph in britpicked.paragraphs %}
            <div class="britpick-paragraph">
                <div class="britpick-paragraph-text">
                    {% for inline in paragraph.inlines %}

                        {% if inline.britpick %}
                            {% include "britpick_app/snippets/britpick_inline.html" with britpick=inline.britpick classes=inline.classes originaltext=inline.text %}
                        {% else %}
                            {{ inline.text }}
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="britpick-paragraph-sidebar">
                    {% for britpick in paragraph.britpicks %}
                        {% include "britpick_app/snippets/britpick_expanded.html" with britpick=britpick %}
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>

{% endblock %}